<mujoco model="monster_truck_flip">
  <option gravity="0 0 -9.81" integrator="RK4" timestep="0.001"/>
  <compiler angle="radian"/>

  <default>
    <geom contype="1" conaffinity="1" friction="2.0 0.5 0.02"
          solimp="0.9 0.9 0.01" solref="0.005 1" density="800"/>
    <joint damping="0.2"/>
  </default>

  <visual>
    <quality shadowsize="4096"/>
    <map znear="0.01" zfar="20"/>
  </visual>

  <worldbody>
    <light name="sun" pos="0 0 10" dir="0 0 -1" diffuse="1 1 1"/>
    <geom name="ground" type="plane" size="10 10 0.1" rgba="0.8 0.8 0.8 1"/>

    <!-- Upside-down monster truck -->
    <body name="chassis" pos="0 0 0.6" quat="0 1 0 0">
      <freejoint/>

      <!-- IMU mounting point at chassis center -->
      <site name="imu_site" pos="0 0 0" size="0.01" rgba="0 1 0 1"/>

      <!-- Base rectangular chassis -->
      <!-- size = [0.35 0.25 0.12] => top at z = 0.12 in local coords -->
      <geom type="box" size="0.35 0.25 0.12" rgba="0.6 0.1 0.1 1" mass="450"/>

      <!-- Arched roof built from thin slabs.
           size = [0.05 0.25 0.01]:
             - 0.05: half-length along x (slab length = 0.10)
             - 0.25: half-width along y (slab width = 0.50, same as chassis)
             - 0.01: half-thickness along local normal -->

      <!-- Leftmost slab: covers [-0.35, -0.25] -->
      <geom name="roof_slab_1"
            type="box"
            size="0.05 0.25 0.01"
            pos="-0.30 0 0.130"
            euler="0 -0.583 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Next: covers [-0.25, -0.15] -->
      <geom name="roof_slab_2"
            type="box"
            size="0.05 0.25 0.01"
            pos="-0.20 0 0.179"
            euler="0 -0.389 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Next: covers [-0.15, -0.05] -->
      <geom name="roof_slab_3"
            type="box"
            size="0.05 0.25 0.01"
            pos="-0.10 0 0.210"
            euler="0 -0.194 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Center (top of arch): covers [-0.05, 0.05] -->
      <geom name="roof_slab_4"
            type="box"
            size="0.05 0.25 0.01"
            pos="0.00 0 0.220"
            euler="0 0 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Right side, mirrored: covers [0.05, 0.15] -->
      <geom name="roof_slab_5"
            type="box"
            size="0.05 0.25 0.01"
            pos="0.10 0 0.210"
            euler="0 0.194 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Covers [0.15, 0.25] -->
      <geom name="roof_slab_6"
            type="box"
            size="0.05 0.25 0.01"
            pos="0.20 0 0.179"
            euler="0 0.389 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Rightmost slab: covers [0.25, 0.35] -->
      <geom name="roof_slab_7"
            type="box"
            size="0.05 0.25 0.01"
            pos="0.30 0 0.130"
            euler="0 0.583 0"
            rgba="0.7 0.2 0.2 1"
            mass="10"/>

      <!-- Massive, heavy wheels -->
      <body name="wheel_fl" pos=" 0.35  0.30 -0.20">
        <joint name="j_fl" type="hinge" axis="0 1 0" damping="4"/>
        <geom type="cylinder" size="0.20 0.10" euler="1.57 0 0"
              rgba="0.1 0.1 0.1 1" mass="20"/>
        <geom name="mark_fl" type="sphere" size="0.02"
              pos="0 0 0.20" rgba="1 1 1 1"
              contype="0" conaffinity="0" density="0"/>
      </body>

      <body name="wheel_fr" pos=" 0.35 -0.30 -0.20">
        <joint name="j_fr" type="hinge" axis="0 1 0" damping="4"/>
        <geom type="cylinder" size="0.20 0.10" euler="1.57 0 0"
              rgba="0.1 0.1 0.1 1" mass="20"/>
        <geom name="mark_fr" type="sphere" size="0.02"
              pos="0 0 0.20" rgba="1 1 1 1"
              contype="0" conaffinity="0" density="0"/>
      </body>

      <body name="wheel_rl" pos="-0.35  0.30 -0.20">
        <joint name="j_rl" type="hinge" axis="0 1 0" damping="4"/>
        <geom type="cylinder" size="0.20 0.10" euler="1.57 0 0"
              rgba="0.1 0.1 0.1 1" mass="20"/>
        <geom name="mark_rl" type="sphere" size="0.02"
              pos="0 0 0.20" rgba="1 1 1 1"
              contype="0" conaffinity="0" density="0"/>
      </body>

      <body name="wheel_rr" pos="-0.35 -0.30 -0.20">
        <joint name="j_rr" type="hinge" axis="0 1 0" damping="4"/>
        <geom type="cylinder" size="0.20 0.10" euler="1.57 0 0"
              rgba="0.1 0.1 0.1 1" mass="20"/>
        <geom name="mark_rr" type="sphere" size="0.02"
              pos="0 0 0.20" rgba="1 1 1 1"
              contype="0" conaffinity="0" density="0"/>
      </body>
    </body>
  </worldbody>

  <actuator>
    <motor name="front_left_motor"  joint="j_fl" gear="350"/>
    <motor name="front_right_motor" joint="j_fr" gear="350"/>
    <motor name="rear_left_motor"   joint="j_rl" gear="350"/>
    <motor name="rear_right_motor"  joint="j_rr" gear="350"/>
  </actuator>

  <!-- IMU sensors: accelerometer + gyro + linear velocity at imu_site -->
  <sensor>
    <accelerometer name="imu_acc"  site="imu_site"/>
    <gyro          name="imu_gyro" site="imu_site"/>
    <velocimeter   name="imu_vel"  site="imu_site"/>
  </sensor>
</mujoco>